<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Advanced Live Code Editor - Write HTML, CSS, and JavaScript with real-time preview" />
  <title>Advanced Live Code Editor | Real-time HTML, CSS & JS Preview</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    :root {
      --primary: #4a6cf7;
      --primary-dark: #3a5ce5;
      --dark: #1e1e2e;
      --darker: #151521;
      --light: #f8f9fa;
      --gray: #6c757d;
      --success: #28a745;
      --editor-bg: #1e1e1e;
      --editor-header: #2d2d30;
      --editor-border: #3e3e42;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: var(--darker);
      color: var(--light);
      line-height: 1.6;
      overflow: hidden;
    }

    .container {
      display: flex;
      flex-direction: column;
      height: 100vh;
      width: 100%;
    }

    header {
      background-color: var(--dark);
      padding: 15px 20px;
      border-bottom: 1px solid var(--editor-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo i {
      color: var(--primary);
      font-size: 24px;
    }

    .logo h1 {
      font-size: 22px;
      font-weight: 600;
    }

    .controls {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .btn {
      background-color: var(--primary);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .btn:hover {
      background-color: var(--primary-dark);
      transform: translateY(-2px);
    }

    .btn-secondary {
      background-color: var(--gray);
    }

    .btn-secondary:hover {
      background-color: #5a6268;
    }

    .btn-success {
      background-color: var(--success);
    }

    .btn-success:hover {
      background-color: #218838;
    }

    .main-content {
      display: flex;
      flex: 1;
      overflow: hidden;
    }

    .editor-section {
      flex: 1;
      display: flex;
      flex-direction: column;
      border-right: 1px solid var(--editor-border);
      min-width: 0;
    }

    .editor-tabs {
      display: flex;
      background-color: var(--editor-header);
      border-bottom: 1px solid var(--editor-border);
      overflow-x: auto;
    }

    .editor-tab {
      padding: 12px 20px;
      cursor: pointer;
      border-right: 1px solid var(--editor-border);
      transition: all 0.3s;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    .editor-tab.active {
      background-color: var(--primary);
    }

    .editor {
      flex: 1;
      border: none;
      background-color: var(--editor-bg);
      color: #d4d4d4;
      padding: 15px;
      font-size: 15px;
      line-height: 1.5;
      resize: none;
      outline: none;
      font-family: Consolas, "Courier New", monospace;
      tab-size: 4;
      display: none;
    }

    .editor.active {
      display: block;
    }

    .preview-section {
      flex: 1;
      display: flex;
      flex-direction: column;
      min-width: 0;
    }

    .preview-header {
      background-color: var(--editor-header);
      padding: 12px 20px;
      border-bottom: 1px solid var(--editor-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .preview-container {
      flex: 1;
      background-color: white;
    }

    #preview-frame {
      width: 100%;
      height: 100%;
      border: none;
    }

    .status-bar {
      background-color: var(--dark);
      padding: 8px 15px;
      border-top: 1px solid var(--editor-border);
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      color: var(--gray);
    }

    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: var(--success);
      color: white;
      padding: 12px 20px;
      border-radius: 4px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s;
      z-index: 1000;
    }

    .notification.show {
      transform: translateY(0);
      opacity: 1;
    }

    @media (max-width: 768px) {
      .main-content {
        flex-direction: column;
      }

      .editor-section {
        height: 55%;
        border-right: none;
        border-bottom: 1px solid var(--editor-border);
      }

      .preview-section {
        height: 45%;
      }

      .btn {
        font-size: 12px;
        padding: 6px 10px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo"><i class="fas fa-code"></i>
        <h1>Advanced Live Code Editor</h1>
      </div>
      <div class="controls">
        <button id="run-btn" class="btn"><i class="fas fa-play"></i> Run</button>
        <button id="refresh-btn" class="btn btn-secondary"><i class="fas fa-sync-alt"></i> Refresh</button>
        <button id="download-btn" class="btn btn-success"><i class="fas fa-download"></i> Download</button>
        <button id="clear-btn" class="btn btn-secondary"><i class="fas fa-broom"></i> Clear</button>
      </div>
    </header>

    <div class="main-content">
      <section class="editor-section">
        <div class="editor-tabs">
          <div class="editor-tab active" data-editor="html"><i class="fab fa-html5"></i> HTML</div>
          <div class="editor-tab" data-editor="css"><i class="fab fa-css3-alt"></i> CSS</div>
          <div class="editor-tab" data-editor="js"><i class="fab fa-js"></i> JavaScript</div>
        </div>
        <textarea id="html-editor" class="editor active" spellcheck="false">
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Awesome Page</title>
</head>
<body>
  <h1>Hello World</h1>
  <button id="demo-btn">Click Me!</button>
</body>
</html></textarea>
        <textarea id="css-editor" class="editor" spellcheck="false">
body {
  font-family: Arial, sans-serif;
  text-align: center;
  background: #f0f2f5;
  color: #333;
}

button {
  background: #4a6cf7;
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}
button:hover {
  background: #3a5ce5;
}</textarea>
        <textarea id="js-editor" class="editor" spellcheck="false">
document.getElementById("demo-btn").addEventListener("click", ()=>{
  alert("Button clicked! JS is working.");
});</textarea>
      </section>

      <section class="preview-section">
        <div class="preview-header">
          <h2>Live Preview</h2>
        </div>
        <div class="preview-container">
          <iframe id="preview-frame" title="Live Preview"></iframe>
        </div>
      </section>
    </div>

    <div class="status-bar">
      <span id="status-text">Ready</span>
    </div>
  </div>

  <script>
    const tabs = document.querySelectorAll(".editor-tab");
    const editors = document.querySelectorAll(".editor");
    const runBtn = document.getElementById("run-btn");
    const refreshBtn = document.getElementById("refresh-btn");
    const downloadBtn = document.getElementById("download-btn");
    const clearBtn = document.getElementById("clear-btn");
    const previewFrame = document.getElementById("preview-frame");
    const statusText = document.getElementById("status-text");

    let JSZipLoaded = false;

    // Tab switching
    tabs.forEach(tab => {
      tab.addEventListener("click", () => {
        tabs.forEach(t => t.classList.remove("active"));
        editors.forEach(e => e.classList.remove("active"));
        tab.classList.add("active");
        document.getElementById(`${tab.dataset.editor}-editor`).classList.add("active");
        statusText.textContent = `Editing ${tab.dataset.editor.toUpperCase()}`;
      });
    });

    // Update preview
    function updatePreview() {
      const html = document.getElementById("html-editor").value;
      const css = document.getElementById("css-editor").value;
      const js = document.getElementById("js-editor").value;
      const previewDoc = `
<!DOCTYPE html>
<html><head><style>${css}</style></head><body>${html}<script>${js}<\/script></body></html>`;
      previewFrame.srcdoc = previewDoc;
      statusText.textContent = "Preview updated";
      setTimeout(()=> statusText.textContent="Ready",1500);
    }

    // Notification
    function showNotification(message, type="success") {
      const note = document.createElement("div");
      note.className = "notification";
      note.textContent = message;
      note.style.backgroundColor = type==="error" ? "#dc3545" : "#28a745";
      document.body.appendChild(note);
      setTimeout(()=>note.classList.add("show"),10);
      setTimeout(()=>{
        note.classList.remove("show");
        setTimeout(()=>note.remove(),300);
      },2500);
    }

    // JSZip loader
    function loadJSZip() {
      return new Promise((resolve, reject)=>{
        if (window.JSZip) {JSZipLoaded=true;return resolve();}
        const script=document.createElement("script");
        script.src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js";
        script.onload=()=>{JSZipLoaded=true;resolve();};
        script.onerror=reject;
        document.head.appendChild(script);
      });
    }

    // Download
    async function downloadCode(){
      if(!JSZipLoaded) await loadJSZip();
      const zip=new JSZip();
      zip.file("index.html",document.getElementById("html-editor").value);
      zip.file("style.css",document.getElementById("css-editor").value);
      zip.file("script.js",document.getElementById("js-editor").value);
      zip.generateAsync({type:"blob"}).then(content=>{
        const link=document.createElement("a");
        link.href=URL.createObjectURL(content);
        link.download="project.zip";
        link.click();
        showNotification("Project downloaded!");
      });
    }

    // Clear
    function clearEditors(){
      if(confirm("Clear all code?")){
        document.getElementById("html-editor").value="<!DOCTYPE html>\n<html><head><title>New Page</title></head><body>\n<h1>Hello!</h1>\n</body></html>";
        document.getElementById("css-editor").value="body { font-family: sans-serif; }";
        document.getElementById("js-editor").value="// Write your JS here";
        updatePreview();
        showNotification("Code reset to default");
      }
    }

    // Auto update
    let updateTimer;
    editors.forEach(e=>{
      e.addEventListener("input",()=>{
        clearTimeout(updateTimer);
        statusText.textContent="Updating preview...";
        updateTimer=setTimeout(updatePreview,800);
      });
    });

    runBtn.addEventListener("click",updatePreview);
    refreshBtn.addEventListener("click",updatePreview);
    downloadBtn.addEventListener("click",downloadCode);
    clearBtn.addEventListener("click",clearEditors);

    // Init
    loadJSZip();
    updatePreview();
  </script>
</body>
</html>
